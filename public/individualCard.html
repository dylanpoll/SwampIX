<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>ROGLE ROGALE</title>
    <meta name="description" content="A rogue-like game with content generated by ML! Including the name!" />
    <meta name="author" content="By Dylan Poll and Lev Vinokur" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,300,400,500,600,800" />
    <link rel="icon" type="image/png" href="./resources/logos/Rogle.png" />
    <link rel="stylesheet" type="text/css" href="./resources/css/newCard.css">
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <!-- Appwrite Web SDK -->
    <script src="https://cdn.jsdelivr.net/npm/appwrite@9.0.1"></script>
</head>

<body>
    <script>
        // https://swampix.devdylan.us/individualCard.html?cardCastCost=4&cardName=Ow_the_formidable&cardAttack=5&cardDef=3&cardHealth=8&cardDeathDam=3
        $(document).ready(async function () {
            window.cardCastCost = GetURLParameter(Param = "cardCastCost");
            // window.image_path = GetURLParameter(Param="image_path");
            window.cardName = GetURLParameter(Param = "cardName");
            window.cardAttack = GetURLParameter(Param = "cardAttack");
            window.cardDef = GetURLParameter(Param = "cardDef");
            window.cardHealth = GetURLParameter(Param = "cardHealth");
            window.cardDeathDam = GetURLParameter(Param = "cardDeathDam");
            console.log(cardCastCost, cardName, cardAttack, cardDef, cardHealth, cardDeathDam);
            let temp_image_path = 'https://swampix.devdylan.us/resources/cardArt/'+cardName.replaceAll(' ','_');
            let image_path = temp_image_path.replaceAll('"','')+'.png';
            generateCard(cardCastCost, image_path, cardName, cardAttack, cardDef, cardHealth, cardDeathDam);

        });
        function GetURLParameter(Param) {
            var PageURL = window.location.search.substring(1); // /? at the end of a url indicates everything following is a "search" so this gets those items.
            var URLVariables = PageURL.split('&');
            for (var i = 0; i < URLVariables.length; i++) {
                var ParameterName = URLVariables[i].split('=');
                if (ParameterName[0] == Param) {
                    return ParameterName[1];
                }
            }
        }

        async function generateCard(cardCastCost, image_path, cardName, cardAttack, cardDef, cardHealth, cardDeathDam) {
            const playingCard = document.createElement('div');
            // const playingCard = document.createElement('td');
            // playingCard.setAttribute('type', 'button');
            // playingCard.setAttribute('onclick', 'getUserName()');
            // playingCard.setAttribute('style', `background: transparent;margin-top:${topSpacing}px; margin-left:${leftSpacing}px;`);
            playingCard.innerHTML = `
        <div class="cardContainer">
        <div class="cardAvatar" style="background-image:url('`+ image_path + `');"/>
            <div class="cardBase"/>
            <div class="container">
                <table class="cardTextStuff">
                    <tbody>
                        <tr>
                            <td class="cardLevelCost"> ${cardCastCost} </td>
                            <td class="cardName">${cardName}</td>
                            <td class="cardAttckAbsoluteTextPosition"> ${cardAttack} </td>
                            <td class="cardDeffenceAbsoluteTextPosition"> ${cardDef} </td>
                            <td class="cardHealthAbsoluteTextPosition"> ${cardHealth} </td>
                            <td class="cardDeathDamAbsoluteTextPosition"> ${cardDeathDam} </td>
                        </tr>
                    </tbody>
                </table>
                <div class="cardTextStuff"></div>
                <div class="cardDescription"> Descriptions not implemented yet </div>
            </div>
        </div>
`;
            // console.log(playingCard);
            document.body.appendChild(playingCard);
            // document.getElementById("cardTable").appendChild(playingCard);
            // alert(playingCard)
        }
    </script>

</body>

</html>